local PB = class("PB")

function PB:serialize(key, data)
    local keys = string.split(key, ".")
    local pb = require(keys[1])[keys[2]]()
    for k, v in pairs(data) do
        if type(v) ~= "table" then
            pb[k] = v
        else
            for k1, v1 in pairs(v) do
                pb[k][k1] = v1
            end
        end
    end
    return pb:SerializeToString()
end
function PB:deserialize(key, data)
    local keys = string.split(key, ".")
    local pb = require(keys[1])[keys[2]]()
    pb:ParseFromString(data)
    return pb
end

return PB
