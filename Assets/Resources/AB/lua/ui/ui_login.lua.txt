local base = require("ui_base")
local UILogin = class("UILogin", base)

base.static.ab = "ui1"
base.static.abs = {"p1"}

function UILogin:onLoad()
    local ttt = comp:addComponent(self.node, "test")
    print(comp:getComponent(self.node, "test"))
    print(comp:getComponentInChildren(self.node, "test"))
    print(#comp:getComponentsInChildren(self.node, "test"))
    -- ttt:close()
    -- print(comp:getComponent(self.node, "test"))
end

function UILogin:onLoginBtnClick(o, order)
    local username = self.uiComp.InputField.usernameInput.text
    local password = self.uiComp.InputField.passwordInput.text

    http:send(
        "login",
        {username = username, password = password},
        function(data)
            print(tostring(data))
            ui:showUI(
                "ui_tip",
                {
                    msg = "登录成功",
                    onClick = function()
                        ui:showUI("ui_area_main")
                        self:close()
                    end
                }
            )
        end
    )
end
return UILogin
